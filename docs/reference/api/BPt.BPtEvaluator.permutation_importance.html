
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BPt.BPtEvaluator.permutation_importance &#8212; BPt 2.2.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/getting_started.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/pandas.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BPt.BPtEvaluator.subset_by" href="BPt.BPtEvaluator.subset_by.html" />
    <link rel="prev" title="BPt.BPtEvaluator.get_preds_dfs" href="BPt.BPtEvaluator.get_preds_dfs.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/red_logo.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../installation/index.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href=""></a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href=""></a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../user_guide/index.html">User Guide</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">API reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../options/index.html">Default Options</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../change_log/index.html">Change Log</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../cite/index.html">Cite BPt</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/sahahn/BPt" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/SageHahn11" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
          
            
                <li class="">
                    <a href="../dataset.html">Dataset</a>
                </li>
            
          
            
                <li class="">
                    <a href="../pipeline.html">Pipelines</a>
                </li>
            
          
            
                <li class="">
                    <a href="../pipeline_pieces.html">Pipeline Pieces</a>
                </li>
            
          
            
                <li class="">
                    <a href="../problem_spec.html">ProblemSpec</a>
                </li>
            
          
            
                <li class="">
                    <a href="../CV.html">CV</a>
                </li>
            
          
            
                <li class="">
                    <a href="../input_operations.html">Input Operations</a>
                </li>
            
          
            
                <li class="">
                    <a href="../compare.html">Compare</a>
                </li>
            
          
            
                <li class="">
                    <a href="../dists.html">Parameter Distributions</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="../evaluate.html">Evaluate</a>
                    <ul>
                    
                        <li class="">
                            <a href="BPt.get_estimator.html">BPt.get_estimator</a>
                        </li>
                    
                        <li class="">
                            <a href="BPt.evaluate.html">BPt.evaluate</a>
                        </li>
                    
                        <li class="">
                            <a href="BPt.cross_validate.html">BPt.cross_validate</a>
                        </li>
                    
                        <li class="">
                            <a href="BPt.cross_val_score.html">BPt.cross_val_score</a>
                        </li>
                    
                        <li class="active">
                            <a href="BPt.BPtEvaluator.html">BPt.BPtEvaluator</a>
                        </li>
                    
                        <li class="">
                            <a href="BPt.BPtEvaluatorSubset.html">BPt.BPtEvaluatorSubset</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../extensions.html">Extension Classes</a>
                </li>
            
          
            
                <li class="">
                    <a href="../util.html">Util</a>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="bpt-bptevaluator-permutation-importance">
<h1>BPt.BPtEvaluator.permutation_importance<a class="headerlink" href="#bpt-bptevaluator-permutation-importance" title="Permalink to this headline">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="BPt.BPtEvaluator.permutation_importance">
<span class="sig-prename descclassname"><span class="pre">BPtEvaluator.</span></span><span class="sig-name descname"><span class="pre">permutation_importance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_repeats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dfs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/sahahn/BPt/blob/master/BPt/main/BPtEvaluator.py#L1252-L1416"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#BPt.BPtEvaluator.permutation_importance" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the permutation feature importances
from the base scikit-learn function
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.inspection.permutation_importance.html#sklearn.inspection.permutation_importance" title="(in scikit-learn v1.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sklearn.inspection.permutation_importance()</span></code></a></p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>dataset</strong><span class="classifier"><a class="reference internal" href="BPt.Dataset.html#BPt.Dataset" title="BPt.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></span></dt><dd><p>The instance of <a class="reference internal" href="BPt.Dataset.html#BPt.Dataset" title="BPt.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> originally passed to
<a class="reference internal" href="BPt.evaluate.html#BPt.evaluate" title="BPt.evaluate"><code class="xref py py-func docutils literal notranslate"><span class="pre">evaluate()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a different dataset is passed, then unexpected
behavior may occur.</p>
</div>
</dd>
<dt><strong>n_repeats</strong><span class="classifier">int, optional</span></dt><dd><p>The number of times to randomly permute each feature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</dd>
<dt><strong>scorer</strong><span class="classifier">sklearn-style scoring, optional</span></dt><dd><p>Scorer to use. It can be a single sklearn style str,
or a callable.</p>
<p>If left as ‘default’ will use the first scorer defined when
evaluating the underlying estimator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
</pre></div>
</div>
</dd>
<dt><strong>just_model</strong><span class="classifier">bool, optional</span></dt><dd><p>When set to true, the permutation feature importances
will be computed using the final set of transformed features
as passed when fitting the base model. This is reccomended
behavior because it means that the features do not need to
be re-transformed through the full pipeline to evaluate each
feature. If set to False, will permute the features in the
original feature space (which may be useful in some context).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</dd>
<dt><strong>nested_model</strong><span class="classifier">bool, optional</span></dt><dd><p>In the case that <cite>just_model</cite> is set to True, there exists
in some cases the further option to use an even more transformed
set of features. For example, in the case where in the main pipeline
the final estimator is another pipeline, there could be more static
transformations applied in this second pipeline. If <cite>nested_model</cite> is
set to True, then it will attempt to apply these further nested
transformations in the same way as with just_model, feeding in
eventually an even further transformed set of features and even more
specific final estimator when calculating the permutation feature
importances.</p>
<p>By default, this value is True, so the calculated
feature importances here will correspond to the
saved <cite>self.feat_names</cite> in this object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</dd>
<dt><strong>return_as</strong><span class="classifier">[‘dfs’, ‘raw’], optional</span></dt><dd><p>This parameter controls if calculated permutation
feature importances should be returned as a DataFrame
with column names as the corresponding feature names,
or if it should be returned as a list with the raw
output from each fold, e.g., sklearn Batch’s with
parameters ‘importances_mean’, ‘importances_std’
and ‘importances’.</p>
<p>If return as DataFrame is requested, then
‘importances_mean’ and ‘importances_std’
will be returned, but not the raw ‘importances’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;dfs&#39;</span>
</pre></div>
</div>
</dd>
<dt><strong>n_jobs</strong><span class="classifier">int, optional</span></dt><dd><p>The number of jobs to use for this function. Note
that if the underlying estimator supports multiple jobs
during inference (predicting), and the original
problem_spec was set with multiple n_jobs then that original
behavior will still hold, and you may wish to keep this
parameter as 1. On the otherhand, if the base estimator
does not use multiple jobs, passing a higher value here
could greatly speed up computation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</dd>
<dt><strong>random_state</strong><span class="classifier">int, ‘default’ or None, optional</span></dt><dd><p>Pseudo-random number generator to control the permutations
of each feature.
If left as ‘default’ then use the random state defined
during the initial evaluation of the model. Otherwise, you may
pass an int for a different fixed random state or None
for explicitly no
random state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="BPt.BPtEvaluator.get_preds_dfs.html" title="previous page">BPt.BPtEvaluator.get_preds_dfs</a>
    <a class='right-next' id="next-link" href="BPt.BPtEvaluator.subset_by.html" title="next page">BPt.BPtEvaluator.subset_by</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020-2022.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>